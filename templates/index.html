{% extends 'base.html' %}

{% block header %}
<div class="hero-content">
    <model-viewer id="hero-model" src="{{ url_for('static', filename=models.terminal.file) }}" 
                  alt="3D-модель Starlink" 
                  auto-rotate 
                  camera-controls 
                  loading="lazy" 
                  style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.2;"
                  aria-label="Фонова 3D-модель терміналу">
    </model-viewer>
    <div class="satellite-orbit">
        <i class="fas fa-satellite satellite"></i>
        <h1 class="animated-title">Професійний ремонт та<br>переобладнання терміналів<br>STARLINK під ваше авто</h1>
    </div>
    <p class="hero-subtitle fade-in">Швидкий сервіс для стабільного інтернету в дорозі</p>
    <a href="/contacts" class="btn btn-primary btn-lg hero-cta fade-in">Замовити переобладнання</a>
</div>
{% endblock %}

{% block content %}
<!-- Статистика з fallback (якщо JS fail — статично > число) -->
<section id="stats" class="row mb-5 g-4 text-center section">
    <div class="col-md-6">
        <div class="card stats-card bg-secondary text-white">
            <div class="card-body">
                <h2><i class="fas fa-tools"></i> Переобладнано:</h2>
                <div class="count" data-target="{{ stats.reobladnano }}">> {{ stats.reobladnano | int }}</div>  <!-- Fallback статичний -->
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card stats-card bg-secondary text-white">
            <div class="card-body">
                <h2><i class="fas fa-wrench"></i> Відремонтовано:</h2>
                <div class="count" data-target="{{ stats.vidremontovano }}">> {{ stats.vidremontovano | int }}</div>  <!-- Fallback статичний -->
            </div>
        </div>
    </div>
</section>

<!-- Послуги (з моделями в блоці) -->
<section class="row mb-5 section">
    {% for service in services %}
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-dark text-white">
                <h5>{{ service.title }}</h5>
            </div>
            <div class="card-body">
                <p>{{ service.description }}</p>
                <button class="btn btn-outline-light" data-bs-toggle="collapse" data-bs-target="#details{{ loop.index }}">Деталі</button>
                <div class="collapse mt-3" id="details{{ loop.index }}">
                    <ul class="list-group list-group-flush">
                        {% for detail in service.details %}
                        <li class="list-group-item bg-transparent text-white"><i class="fas fa-check"></i> {{ detail }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- Карусель (без змін) -->
                {% if loop.index == 1 %}
                <div id="carouselServices1" class="carousel slide mt-3" data-bs-ride="carousel">
                    <!-- ... (4 фото, як раніше) ... -->
                </div>
                <model-viewer src="{{ url_for('static', filename=models.auto.file) }}" 
                              alt="3D-модель для авто" 
                              auto-rotate 
                              camera-controls 
                              loading="lazy" 
                              style="width: 100%; height: 200px; margin-top: 1rem;">
                </model-viewer>
                {% endif %}
                {% if loop.index == 2 %}
                <div id="carouselServices2" class="carousel slide mt-3" data-bs-ride="carousel">
                    <!-- ... (3 фото, як раніше) ... -->
                </div>
                <model-viewer src="{{ url_for('static', filename=models.repair.file) }}" 
                              alt="3D-модель ремонту" 
                              auto-rotate 
                              camera-controls 
                              loading="lazy" 
                              style="width: 100%; height: 200px; margin-top: 1rem;">
                </model-viewer>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</section>

<!-- Відгуки (без змін) -->
<section id="reviews" class="row mb-5 section">
    <!-- ... (акордеон, як раніше) ... -->
</section>
{% endblock %}
