<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Небограй – Професійний ремонт STARLINK{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body data-theme="dark">
    <!-- Прелоадер -->
    <div id="preloader" class="preloader">
        <div class="preloader-star"></div>
    </div>
    <button class="btn theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-satellite logo-icon" aria-hidden="true"></i> Небограй
                <!-- Fallback SVG, якщо Font Awesome не завантажиться -->
                <svg class="logo-fallback" style="display: none;" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm2-10h-4v4H8l4 4 4-4h-2v-4z" fill="#00bfff"/>
                </svg>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'index' %}active{% endif %}" href="/"><i class="fas fa-home"></i> Головна</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'about' %}active{% endif %}" href="/about"><i class="fas fa-info-circle"></i> Про нас</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'contacts' %}active{% endif %}" href="/contacts"><i class="fas fa-phone"></i> Контакти</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'thanks' %}active{% endif %}" href="/thanks"><i class="fas fa-star"></i> Подяки</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="header starry-bg text-center" id="home">
        <div class="stars" id="stars"></div>
        <div class="container">
            {% block header %}
            <div class="hero-content">
                <div class="satellite-orbit">
                    <i class="fas fa-satellite satellite" aria-hidden="true"></i>
                    <h1 class="animated-title">Професійний ремонт та<br>переобладнання терміналів<br>STARLINK під ваше авто</h1>
                </div>
                <p class="hero-subtitle fade-in">Швидкий сервіс для стабільного інтернету в дорозі</p>
                <a href="/contacts" class="btn btn-primary btn-lg hero-cta fade-in">Замовити переобладнання</a>
            </div>
            {% endblock %}
        </div>
    </header>
    <main class="container my-5 mt-5 pt-5">
        {% block content %}{% endblock %}
    </main>
    <footer>
        <div class="container">
            <p>&copy; 2025 Небограй. Всі права захищено.</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Прелоадер: ховаємо після завантаження
        document.addEventListener('DOMContentLoaded', () => {
            const preloader = document.getElementById('preloader');
            setTimeout(() => {
                preloader.style.opacity = '0';
                setTimeout(() => preloader.style.display = 'none', 500);
            }, 3000); // Збільшено до 3с
        });

        // Перевірка Font Awesome: якщо не завантажився, показати SVG
        window.addEventListener('load', () => {
            const faIcon = document.querySelector('.logo-icon');
            if (!faIcon.offsetWidth) {
                document.querySelector('.logo-fallback').style.display = 'inline-block';
                faIcon.style.display = 'none';
            }
        });

        function toggleTheme() {
            const body = document.body;
            body.dataset.theme = body.dataset.theme === 'dark' ? 'light' : 'dark';
        }

        function animateCounters() {
            const counters = document.querySelectorAll('.count');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const increment = target / 50;
                let current = 0;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                        counter.innerHTML = '> ' + current.toLocaleString();
                    } else {
                        counter.textContent = Math.floor(current).toLocaleString();
                    }
                }, 40);
            });
        }
        if (document.getElementById('stats')) animateCounters();

        // Генерація зірок
        function createStars() {
            const starsContainer = document.getElementById('stars');
            if (!starsContainer) return;
            const numStars = window.innerWidth > 768 ? 30 : 20;
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = (Math.random() * 3 + 1) + 'px';
                star.style.animationDelay = Math.random() * 10 + 's';
                star.style.animationDuration = (Math.random() * 10 + 5) + 's';
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // Particles.js
        if (typeof particlesJS !== 'undefined' && window.location.pathname === '/') {
            particlesJS('stars', {
                particles: {
                    number: { value: 80 },
                    color: { value: '#fff' },
                    shape: { type: 'circle' },
                    opacity: { value: 0.5, random: true },
                    size: { value: 2, random: true },
                    line_linked: { enable: false },
                    move: { enable: true, speed: 1, direction: 'none', random: true, out_mode: 'out' }
                },
                interactivity: { detect_on: 'canvas', events: { onhover: { enable: true, mode: 'repulse' } } },
                retina_detect: true
            });
        } else {
            console.log('Particles.js not loaded, using CSS stars fallback');
        }

        // Parallax для супутника
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const satellite = document.querySelector('.satellite');
            if (satellite) {
                satellite.style.transform = `rotate(${scrolled * 0.5}deg) translateX(40px)`; // Parallax + orbit
            }
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>